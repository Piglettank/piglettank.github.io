---
import Layout from "../layouts/MyLayout.astro";
import pig from "../assets/pig.png";
import { Image } from "astro:assets";
import SectionHeader from "../components/SectionHeader.astro";
import Card from "../components/Card.astro";
import games_header from "../assets/games.png";
import games_header_hover from "../assets/games_hover.png";
import tools_header from "../assets/tools.png";
import tools_header_hover from "../assets/tools.png";
import ff_logo from "../assets/ff_logo.png";
import ff_game_gif from "../assets/ff_game_gif.gif";
import flubbermonkeys_logo from "../assets/flubbermonkeys_logo.png";
import flubbermonkeys_gif from "../assets/flubbermonkeys_gif.gif";
import pokemon_logo from "../assets/pokemon_chart.png";
import pokemon_gif from "../assets/pokemon_chart_gif.gif";
import github_white from "../assets/github_white.png";
import youtube_white from "../assets/youtube_white.png";
import mal_white from "../assets/mal_white.png";
import SocialMediaLink from "../components/SocialMediaLink.astro";
---

<Layout>
  <style>
    .hero-section {
      display: flex;
      height: 80svh;
      align-items: center;
      align-self: center;
      justify-content: center;
      background-size: auto;
      background-repeat: no-repeat;
      gap: 40px;
      width: 100%;
    }

    .text {
      flex: 1;
      max-width: 540px;
      color: var(--myWhite);
    }

    #title {
      cursor: pointer;
      display: inline-block;
      transition: all 0.2s ease-out;
    }

    #title:hover {
      color: var(--glow);
      transform: scale(1.05);
    }

    #title:active {
      transform: scale(0.98);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(8px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #title.animating {
      animation: fadeInUp 0.7s ease-out forwards;
    }

    #subtitle {
      opacity: 0;
    }

    #subtitle.animating {
      animation: fadeInUp 0.5s ease-out forwards;
      animation-delay: 0.25s;
    }

    .hero-image {
      width: 400px;
      height: 400px;
      border-radius: 100%;
      object-fit: cover;
    }

    .social-media-links {
      display: flex;
      gap: 16px;
    }

    :global(.social-link-1) {
      opacity: 0;
      animation: fadeInUp 0.5s ease-out forwards;
      animation-delay: 0.55s;
    }

    :global(.social-link-2) {
      opacity: 0;
      animation: fadeInUp 0.5s ease-out forwards;
      animation-delay: 0.65s;
    }

    :global(.social-link-3) {
      opacity: 0;
      animation: fadeInUp 0.5s ease-out forwards;
      animation-delay: 0.75s;
    }

    @media screen and (max-width: 760px) {
      .hero-image {
        height: 40%;
        width: 80vw;
        margin-top: 60px;
        object-fit: contain;
      }
      h1 {
        font-size: 30px;
      }
      .hero-section {
        display: flex;
        align-items: flex-start;
        flex-direction: column;
        align-items: center;
        text-align: center;
        align-content: center;
        gap: 0px;
        width: 100%;
        height: 85svh;
        min-height: 480px;
      }

      .social-media-links {
        display: flex;
        justify-content: center;
        gap: 16px;
      }
    }
  </style>

  <div class="hero-section">
    <Image src={pig} alt="Me about to smash" class="hero-image" />
    <div class="text">
      <h1
        id="title"
        style="margin-bottom: 0px;"
        role="button"
        tabindex="0"
        aria-label="Click to cycle through greetings in different languages"
      >
        &nbsp; <!-- Empty character to avoid jitter -->
      </h1>
      <p id="subtitle" class="animating" style="margin-top: 8px;">
        Welcome to my website. Enjoy your stay!
      </p>
      <div class="social-media-links">
        <SocialMediaLink
          class="social-link-1"
          image={github_white}
          alt="GitHub"
          link="https://github.com/piglettank"
        />
        <SocialMediaLink
          class="social-link-2"
          image={youtube_white}
          alt="Youtube"
          link="https://www.youtube.com/user/Piglettank"
        />
        <SocialMediaLink
          class="social-link-3"
          image={mal_white}
          alt="MyAnimeList"
          link="https://myanimelist.net/mangalist/Piglettank"
        />
      </div>
    </div>
  </div>

  <SectionHeader
    image={games_header}
    hoverImage={games_header_hover}
    title="Games"
    ref="games"
  />
  <Card
    image={flubbermonkeys_logo}
    hoverImage={flubbermonkeys_gif}
    title="Flubbermonkeys"
    description="Cute adventure game for two players. Available on Itch."
    link="https://flubbermonkeys.itch.io/game"
    imageAlt="Flubbermonkeys"
    hoverImageAlt="Flubbermonkeys Game Preview"
    tags={["Unity"]}
  />
  <Card
    image={ff_logo}
    hoverImage={ff_game_gif}
    title="Frilans Flame"
    description="Endless 2D runner with Frilans Finans theme. Hosted on Netlify."
    link="https://frilans-flame.netlify.app"
    imageAlt="Frilans Flame Logo"
    hoverImageAlt="Frilans Flame Game Preview"
    tags={["Flutter", "Flame"]}
  />
  <div style="height: 80px;"></div>

  <SectionHeader
    image={tools_header}
    hoverImage={tools_header_hover}
    title="Tools"
    ref="tools"
  />
  <Card
    image={pokemon_logo}
    hoverImage={pokemon_gif}
    title="Pokémon Type Chart"
    description="Interactive Pokémon type chart. Hosted on Netlify."
    link="https://pokemon-chart.netlify.app/"
    imageAlt="Pokémon Type Chart screenshot"
    hoverImageAlt="Pokémon Type Chart preview"
    tags={["Flutter"]}
  />
  <div style="height: 800px;"></div>
</Layout>

<script>
  const greetings = [
    "Ça va",
    "¡Buenas!",
    "Shalom",
    "おっす！",
    // "押忍!",
    "Tjenixen!",
    "Howdy!",
    "Moin moin",
    "Привіт",
  ];

  let currentIndex = Math.floor(Math.random() * greetings.length);
  const title = document.getElementById("title");

  if (title) {
    // Function to animate greeting
    const animateGreeting = () => {
      // Remove animation class to reset
      title.classList.remove("animating");
      // Force reflow to restart animation
      void title.offsetWidth;
      // Add animation class
      title.classList.add("animating");
    };

    // Set initial greeting and animate
    title.textContent = greetings[currentIndex];
    animateGreeting();

    // Function to cycle greeting
    const cycleGreeting = () => {
      // Cycle to next greeting
      currentIndex = (currentIndex + 1) % greetings.length;
      title.textContent = greetings[currentIndex];
      animateGreeting();
    };

    // Add click event listener
    title.addEventListener("click", cycleGreeting);

    // Add keyboard event listener for accessibility
    title.addEventListener("keydown", (event) => {
      if (event.key === "Enter" || event.key === " ") {
        event.preventDefault();
        cycleGreeting();
      }
    });
  }
</script>
